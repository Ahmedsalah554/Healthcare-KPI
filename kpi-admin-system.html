<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ - ูุธุงู KPI</title>
    
    <link rel="stylesheet" href="./css/variables.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/admin-styles.css">
    <link rel="stylesheet" href="./css/charts.css">
</head>
<body>
    <!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">๐จโ๐ผ</div>
                <h1>ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ</h1>
                <p>ูุธุงู ุฅุฏุงุฑุฉ ูุคุดุฑุงุช ๏ฟฝ๏ฟฝูุฃุฏุงุก</p>
            </div>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" id="loginEmail" required placeholder="admin@system.com" value="admin@system.com">
                </div>

                <div class="form-group">
                    <label for="loginPassword">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="loginPassword" required placeholder="โขโขโขโขโขโขโขโข" value="admin123">
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    ๐ ุชุณุฌูู ุงูุฏุฎูู
                </button>
            </form>

            <div class="mt-2" style="text-align: center; color: #666; font-size: 0.9rem;">
                <p><strong>ููุชุฌุฑุจุฉ:</strong></p>
                <p>ุงูุจุฑูุฏ: admin@system.com</p>
                <p>ูููุฉ ุงููุฑูุฑ: admin123</p>
            </div>
        </div>
    </div>

    <!-- ููุญุฉ ุงูุชุญูู -->
    <div id="adminPanel" class="container-fluid" style="display: none;">
        <!-- Toggle Sidebar ููููุจุงูู -->
        <button class="toggle-sidebar" onclick="document.getElementById('sidebar').classList.toggle('active')">
            โฐ ุงููุงุฆูุฉ
        </button>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>๐ฅ ูุธุงู KPI</h2>
                <p>ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ</p>
            </div>

            <div class="user-info">
                <div class="user-avatar">๐ค</div>
                <div class="user-name" id="userNameDisplay">ุงููุฏูุฑ</div>
                <div class="user-role" id="userRoleDisplay">ูุฏูุฑ ุงููุธุงู</div>
                <div class="user-role" id="userFacilityDisplay" style="font-size: 0.75rem; margin-top: 5px;">-</div>
            </div>

            <ul class="sidebar-nav">
                <li><a onclick="switchView('dashboard')" class="active">๐ ููุญุฉ ุงููุนูููุงุช</a></li>
                <li><a onclick="switchView('facilities')">๐ฅ ุฅุฏุงุฑุฉ ุงูููุดุขุช</a></li>
                <li><a onclick="switchView('users')">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</a></li>
                <li><a onclick="switchView('kpis')">๐ ุฅุฏุงุฑุฉ ุงููุคุดุฑุงุช</a></li>
                <li><a onclick="switchView('data')">๐พ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ</a></li>
                <li><a onclick="switchView('reports')">๐ ุงูุชูุงุฑูุฑ</a></li>
                <li><a onclick="switchView('settings')">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</a></li>
            </ul>

            <div class="sidebar-footer">
                <button class="btn btn-logout" onclick="handleLogout()">
                    ๐ช ุชุณุฌูู ุงูุฎุฑูุฌ
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard -->
            <div id="dashboard" class="tab-content active">
                <div class="header">
                    <h1>๐ ููุญุฉ ุงููุนูููุงุช</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="location.reload()">
                            ๐ ุชุญุฏูุซ
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">๐ฅ</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงูููุดุขุช</div>
                        <div class="stat-number" id="totalFacilities">0</div>
                        <div class="stat-trend">โ ูุดุท</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">๐ฅ</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงููุณุชุฎุฏููู</div>
                        <div class="stat-number" id="totalUsers">0</div>
                        <div class="stat-trend">โ ูุนุงู</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">๐</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงููุคุดุฑุงุช</div>
                        <div class="stat-number" id="totalKPIs">0</div>
                        <div class="stat-trend">9 ูุฆุงุช</div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-icon">๐พ</div>
                        <div class="stat-label">ุงูุจูุงูุงุช ุงููุฏุฎูุฉ</div>
                        <div class="stat-number" id="totalData">0</div>
                        <div class="stat-trend" id="monthlyData">0 ูุฐุง ุงูุดูุฑ</div>
                    </div>
                </div>

                <div id="dashboardCharts"></div>
            </div>

            <!-- Facilities Management -->
            <div id="facilities" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">๐ฅ ุฅุฏุงุฑุฉ ุงูููุดุขุช</div>
                        <button class="btn btn-primary" onclick="addFacility()">
                            โ ุฅุถุงูุฉ ููุดุฃุฉ
                        </button>
                    </div>

                    <div class="table-responsive">
                        <table id="facilitiesTable">
                            <thead>
                                <tr>
                                    <th>ุงูููุฏ</th>
                                    <th>ุงุณู ุงูููุดุฃุฉ</th>
                                    <th>ุงูููุน</th>
                                    <th>ุงููุฏููุฉ</th>
                                    <th>ุงููุงุชู</th>
                                    <th>ุงูุณุนุฉ</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Users Management -->
            <div id="users" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</div>
                        <button class="btn btn-primary" onclick="addUser()">
                            โ ุฅุถุงูุฉ ูุณุชุฎุฏู
                        </button>
                    </div>

                    <div class="table-responsive">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>ุงูุงุณู</th>
                                    <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                                    <th>ุงูููุดุฃุฉ</th>
                                    <th>ุงูุตูุงุญูุฉ</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงููุงุชู</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- KPIs Management -->
            <div id="kpis" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">๐ ุฅุฏุงุฑุฉ ุงููุคุดุฑุงุช (80+ ูุคุดุฑ)</div>
                        <button class="btn btn-success" onclick="alert('ุชู ุชุญููู ุฌููุน ๏ฟฝ๏ฟฝููุคุดุฑุงุช!')">
                            โ ุนุฑุถ ุงููู
                        </button>
                    </div>
                    <div id="kpisManagementContainer"></div>
                </div>
            </div>

            <!-- Data Management -->
            <div id="data" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">๐พ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ</div>
                        <div class="header-actions">
                            <button class="btn btn-success" onclick="alert('ุชุตุฏูุฑ Excel ูุฑูุจุงู!')">
                                ๐ฅ ุชุตุฏูุฑ Excel
                            </button>
                            <button class="btn btn-danger" onclick="if(confirm('ุญุฐู ูู ุงูุจูุงูุงุชุ')) { localStorage.clear(); location.reload(); }">
                                ๐๏ธ ูุณุญ ุงููู
                            </button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table id="dataTable">
                            <thead>
                                <tr>
                                    <th>ุงูููุดุฃุฉ</th>
                                    <th>ุงููุณุชุฎุฏู</th>
                                    <th>ุงููุคุดุฑ</th>
                                    <th>ุงูุชุงุฑูุฎ</th>
                                    <th>ุงููุชูุฌุฉ</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Reports -->
            <div id="reports" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">๐ ุงูุชูุงุฑูุฑ</div>
                    </div>
                    <div class="empty-state">
                        <div class="empty-state-icon">๐</div>
                        <h3>ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ</h3>
                        <p>ุณูุชู ุฅุถุงูุฉ ูุธุงู ุงูุชูุงุฑูุฑ ุงููุชูุฏู ูุฑูุจุงู</p>
                        <button class="btn btn-primary mt-2" onclick="alert('ูุฑูุจุงู!')">
                            ๐ ุฅูุดุงุก ุชูุฑูุฑ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Settings -->
            <div id="settings" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</div>
                    </div>
                    
                    <div class="card-body">
                        <h3>ุฅุนุฏุงุฏุงุช ุงููุธุงู</h3>
                        
                        <div class="form-group">
                            <label>ุงุณู ุงููุธุงู</label>
                            <input type="text" value="ูุธุงู ุฅุฏุงุฑุฉ ูุคุดุฑุงุช ุงูุฃุฏุงุก" readonly>
                        </div>

                        <div class="form-group">
                            <label>ุงูุฅุตุฏุงุฑ</label>
                            <input type="text" value="2.0.0" readonly>
                        </div>

                        <div class="form-group">
                            <label>ุงููุบุฉ</label>
                            <select>
                                <option selected>ุงูุนุฑุจูุฉ</option>
                                <option>English</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked> ุชูุนูู ุงูุฅุดุนุงุฑุงุช
                            </label>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox"> ุงูุญูุธ ุงูุชููุงุฆู
                            </label>
                        </div>

                        <button class="btn btn-primary">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                        <button class="btn btn-danger" onclick="if(confirm('ุงุณุชุนุงุฏุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉุ')) alert('ุชู!')">
                            ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Facility Modal -->
    <div id="facilityModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span id="modalTitle">ุฅุถุงูุฉ ููุดุฃุฉ ุฌุฏูุฏุฉ</span>
                <button class="modal-close" onclick="closeModal('facilityModal')">ร</button>
            </div>
            <form id="facilityForm" onsubmit="saveFacility(event)">
                <input type="hidden" id="facilityId">
                
                <div class="form-group">
                    <label for="facilityCode">ููุฏ ุงูููุดุฃุฉ *</label>
                    <input type="text" id="facilityCode" required placeholder="FAC001">
                </div>

                <div class="form-group">
                    <label for="facilityName">ุงุณู ุงูููุดุฃุฉ *</label>
                    <input type="text" id="facilityName" required placeholder="ูุณุชุดูู ุงูููู ููุฏ">
                </div>

                <div class="form-group">
                    <label for="facilityType">ููุน ุงูููุดุฃุฉ *</label>
                    <select id="facilityType" required>
                        <option value="">-- ุงุฎุชุฑ ุงูููุน --</option>
                        <option value="ูุณุชุดูู">ูุณุชุดูู</option>
                        <option value="ูุฑูุฒ ุตุญู">ูุฑูุฒ ุตุญู</option>
                        <option value="ุนูุงุฏุฉ">ุนูุงุฏุฉ</option>
                        <option value="ูุฎุชุจุฑ">ูุฎุชุจุฑ</option>
                        <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="facilityCity">ุงููุฏููุฉ *</label>
                    <input type="text" id="facilityCity" required placeholder="ุงููุงูุฑุฉ">
                </div>

                <div class="form-group">
                    <label for="facilityPhone">ุงููุงุชู *</label>
                    <input type="tel" id="facilityPhone" required placeholder="0112345678">
                </div>

                <div class="form-group">
                    <label for="facilityEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                    <input type="email" id="facilityEmail" placeholder="info@hospital.com">
                </div>

                <div class="form-group">
                    <label for="facilityCapacity">ุงูุณุนุฉ</label>
                    <input type="number" id="facilityCapacity" placeholder="500">
                </div>

                <div class="form-group">
                    <label for="facilityStatus">ุงูุญุงูุฉ</label>
                    <select id="facilityStatus">
                        <option value="active">ูุดุท</option>
                        <option value="inactive">ุบูุฑ ูุดุท</option>
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('facilityModal')">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">๐พ ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span id="userModalTitle">ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</span>
                <button class="modal-close" onclick="closeModal('userModal')">ร</button>
            </div>
            <form id="userForm" onsubmit="saveUser(event)">
                <input type="hidden" id="userId">
                
                <div class="form-group">
                    <label for="userName">ุงูุงุณู *</label>
                    <input type="text" id="userName" required placeholder="ุฃุญูุฏ ูุญูุฏ">
                </div>

                <div class="form-group">
                    <label for="userEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                    <input type="email" id="userEmail" required placeholder="ahmed@example.com">
                </div>

                <div class="form-group">
                    <label for="userPassword">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="userPassword" placeholder="ุงุชุฑูู ูุงุฑุบุงู ููุฅุจูุงุก ุนูู ุงููุฏูู">
                </div>

                <div class="form-group">
                    <label for="userPhone">ุงููุงุชู</label>
                    <input type="tel" id="userPhone" placeholder="0501234567">
                </div>

                <div class="form-group">
                    <label for="userFacility">ุงูููุดุฃุฉ *</label>
                    <select id="userFacility" required></select>
                </div>

                <div class="form-group">
                    <label for="userRole">ุงูุตูุงุญูุฉ *</label>
                    <select id="userRole" required>
                        <option value="user">ูุณุชุฎุฏู</option>
                        <option value="supervisor">ูุดุฑู</option>
                        <option value="admin">ูุฏูุฑ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="userStatus">ุงูุญุงูุฉ</label>
                    <select id="userStatus">
                        <option value="active">ูุดุท</option>
                        <option value="inactive">ุบูุฑ ูุดุท</option>
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('userModal')">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">๐พ ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/kpi-data.js"></script>
    <script src="./js/charts.js"></script>
    <script src="./js/admin-main.js"></script>
</body>
</html>
